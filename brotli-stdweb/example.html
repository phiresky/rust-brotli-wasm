<meta charset="utf-8">

<script src="brotli-stdweb.js"></script>

<script>
    const buffer_size = 4096;
    const quality = 11;
    const lg_window_size = 21;
    function down() {
        const i = new TextEncoder().encode(inp.value);
        oup.value = btoa(Array.from(compress(i, buffer_size, quality, lg_window_size)).map(p => String.fromCharCode(p)).join(""));
    }

    function up() {
        const i = Uint8Array.from(atob(oup.value), c => c.charCodeAt(0))
        inp.value = new TextDecoder().decode(decompress(i, buffer_size));
    }
</script>
<style>
    textarea {
        display: block;
        width: 100%;
        height: 10em;
    }
</style>
<div>
    <textarea id=inp></textarea>
    <button onclick=down()>⇩ Compress</button>
    <button onclick=up()>⇧ Decompress</button>
    <textarea id=oup>GRYDIB2nV7q1O+Z9Y3uLiZTyJUMx6dSwabX20407Tdw+r4RcATdAJm/pzgcyGxBsfZ99Hz0/ZeHCCAMejgtDCDBAT/U8OITE656ua8TDeHySG/6U9h3/b5U3bLOvOlEczVbCpj9ew+MDLu8bGLSADdjyr2xj2yfstjQWo6HGm8sLxYlQDKzzOtleeFMft75RaS9vJfLvxFBh+UfL8ChVd/jPtgrWqMHF9PqK+Ff1ub5Bee0zsa3KbjrBgfYYPhWNr2zjx4XgV8TSaNWVDa1OHyyH5V/o69s53QFUuiG2yudaVeem2luDD30tQysfLyjDrhb+GDOZ3hSenGmLBVmCpn4ngV+hODkr8Em7C3Gmj9ZGcGCWchQwh4S1T/zOUj+l6JON96aY0gtPsl0bptEnkaDPLe+xKgwdeLB84jpbLNk0MHyDfa0ND7cQQypjI8buL2hyQF+1MbTLAlN+TWDchmRRquGPaUk4nmNZ1/OfrhAcpBiSIZ6+Gey2UFg0PRdyMKxQ9vFuL4j7QlqDeeqaiedkmwDEP1b7S0sb1rfrHB+8ikiWp90=</textarea>
</div>